// Generated by CoffeeScript 1.10.0
(function(window, $) {
  'use strict';
  var Playlist;
  Playlist = (function() {
    var expectedKeys;

    expectedKeys = [];

    function Playlist(container, options) {
      var base, current;
      this.container = container;
      this.options = options;
      this.items = this.container.find(this.options['itemSelector']);
      this.items.on('click', 'a', this._onClick);
      if (typeof (base = this.options).ready === "function") {
        base.ready();
      }
      current = this.container.find(this.options['currentItemSelector']).first();
      if (current.length) {
        this.currentIndex = current.index();
      } else {
        this.currentIndex = 0;
      }
      this._setCurrent(this.currentIndex);
      return;
    }

    Playlist.prototype._setCurrent = function(index) {
      var base, current;
      this.currentIndex = index;
      current = this.items.eq(index);
      current.siblings().removeClass(this.options['currentItemSelector']);
      current.addClass(this.options['currentItemSelector']);
      if (typeof (base = this.options).setCurrent === "function") {
        base.setCurrent(current);
      }
    };

    Playlist.prototype.length = function() {
      return this.items.length;
    };

    Playlist.prototype.moveTo = function(index) {
      if (index < 0 || index >= this.length()) {
        return;
      }
      this._setCurrent(index);
    };

    Playlist.prototype.next = function() {
      var index;
      index = (this.currentIndex + 1) % this.length();
      return this.moveTo(index);
    };

    Playlist.prototype.previous = function() {
      var index;
      index = (this.length + this.currentIndex - 1) % this.length();
      return this.moveTo(index);
    };

    Playlist.prototype._onClick = function(e) {
      var index, item;
      e.preventDefault();
      e.stopPropagation();
      item = $(e.target).closest(this.options['itemSelector']);
      index = this.items.index(item);
      this.moveTo(index);
      return false;
    };

    return Playlist;

  })();
  return window.Playlist = Playlist;
})(this, this.jQuery);
