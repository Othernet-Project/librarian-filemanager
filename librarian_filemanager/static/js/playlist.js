// Generated by CoffeeScript 1.10.0
(function(window, $) {
  'use strict';
  var Playlist;
  Playlist = (function() {
    var expectedKeys;

    expectedKeys = [];

    function Playlist(container, options) {
      var base, current, currentIndex;
      this.container = container;
      this.options = options;
      this.items = this.container.find(this.options['itemSelector']);
      this.items.on('click', 'a', (function(_this) {
        return function(e) {
          _this._onClick(e);
        };
      })(this));
      current = this.items.find(this.options['currentItemSelector']).first();
      currentIndex = current.index();
      if (typeof (base = this.options).ready === "function") {
        base.ready((function(_this) {
          return function() {
            _this._setCurrent(currentIndex);
          };
        })(this));
      }
    }

    Playlist.prototype._setCurrent = function(index) {
      var base, current;
      this.currentIndex = index;
      current = this.items.eq(index);
      current.siblings().removeClass(this.options['currentItemSelector']);
      current.addClass(this.options['currentItemSelector']);
      if (typeof (base = this.options).setCurrent === "function") {
        base.setCurrent(current);
      }
    };

    Playlist.prototype.len = function() {
      return this.items.length;
    };

    Playlist.prototype.moveTo = function(index) {
      if (index < 0 || index >= this.len) {
        return;
      }
      setCurrent(index);
    };

    Playlist.prototype.next = function() {
      var index;
      index = (this.currentIndex + 1) % this.len;
      return this.moveTo(index);
    };

    Playlist.prototype.previous = function() {
      var index;
      index = (this.len + this.currentIndex - 1) % this.len;
      return this.moveTo(index);
    };

    Playlist.prototype._onClick = function(e) {
      var index, item;
      e.preventDefault();
      e.stopPropagation();
      item = $(e.target).closest(this.options['itemSelector']);
      index = this.items.index(item);
      this.moveTo(index);
      return false;
    };

    return Playlist;

  })();
  return window.Playlist = Playlist;
})(this, this.jQuery);
